---
title: http基础篇
date: 2017-11-04 15:32:26
categories: http
tags: [http]
---

## 什么是http

HTTP是Hyper Text Transfer Protocol（超文本传输协议）的缩写  目前使用的大多是HTTP 1.1版本

<!--more-->

HTTP [超文本传输协议] 是获取网络资源的协议，在获取HTML页面后者js文件都需要按照此协议。HTTP协议是web数据交换的基础。它可以使浏览器更加高效，使网络传输减少。它不仅保证计算机正确快速地传输超文本文档，还确定传输文档中的哪一部分，以及哪部分内容首先显示(如文本先于图形)等在客户端从服务端接受到相应后，进行数据解析和页面渲染

## http的特点

1.支持客户/服务器模式。

2.简单快速：客户向服务器请求服务时，只需传送请求方法和路径。请求方法常用的有GET、HEAD、POST。每种方法规定了客户与服务器联系的类型不同。由于HTTP协议简单，使得HTTP服务器的程序规模小，因而通信速度很快。

3.灵活：HTTP允许传输任意类型的数据对象。正在传输的类型由Content-Type加以标记。

4.无连接：无连接的含义是限制每次连接只处理一个请求。

服务器处理完客户的请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间。

5.无状态：HTTP协议是无状态协议。

无状态是指协议对于事务处理没有记忆能力。缺少状态意味着如果后续处理需要前面的信息，则它必须重传，这样可能导致每次连接传送的数据量增大。另一方面，在服务器不需要先前信息时它的应答就较快。

就是在同一个连接中，在两个请求之间是完全没有关系的。所以服务器不知道这两个请求来自同一个连接

可以通过设置请求头或者使用cookie等存储机制解决此问题

## http 分析

HTTP协议属于TCP/IP协议族应用层的协议。

### 持久链接

持久链接（HTTP Persistent Connections、HTTP keep-alive、HTTP connection reuse）

HTTP协议的初始版本中，每进行一次HTTP通信就要断开一次TCP链接，频繁的TCP链接与断开（如请求一个有很多图片的网页）会造成无谓的流量消耗和低效的性能。

持久链接的特点是：只要任意一端没有明确地提出断开连接，则保持TCP连接状态。

在HTTP/1.1中，所有的连接默认都是持久连接，持久连接的实现需要服务器端和客户端同时支持。

持久连接使得当有多个请求时，可以以管线化方式发出请求：不用等待前一个请求的响应即可以直接发送下一个请求（实现并行请求行为）

### HTTP事务

一次HTTP操作称为一个事务，其工作过程可分为四步：

1）首先客户机与服务器需要建立连接。只要单击某个链接，HTTP的工作开始。

2）建立连接后，客户机发送一个请求给服务器，请求方式的格式为：统一资源标识符（URL）、协议版本号，后边是MIME信息包括请求修饰符、客户机信息和可能的内容。

3）服务器接到请求后，给予相应的响应信息，其格式为一个状态行，包括信息的协议版本号、一个成功或错误的代码，后边是MIME信息包括服务器信息、实体信息和可能的内容。

4）客户端接收服务器所返回的信息通过浏览器显示在用户的显示屏上，然后客户机与服务器断开连接。

如果在以上过程中的某一步出现错误，那么产生错误的信息将返回到客户端，有显示屏输出。对于用户来说，这些过程是由HTTP自己完成的，用户只要用鼠标点击，等待信息显示就可以了。

** HTTP传输的这件事 Request + Eesponse  只有请求和响应都完成，才算HTTP事物完成 **

### HTTP 报文

客户端不仅可以向服务器发送请求，还可以把内容传送给服务器  服务器端也会把一些内容返回给客户端

* 请求报文: 客户端给服务器的内容

* 响应报文: 服务器给客户端的内容

两者统称为HTTP报文

第一部分 起始行 第二部分 首部（头）第三部分 主体

![message](/img/http/message.png)

对于请求报文 -》  请求起始行 请求头 请求主体

对于响应报文- 》  响应起始行 响应头 响应主体

![message](/img/http/message2.png)

其实对于首部 来说，除了请求头和响应头 还有通用头 自定义请求头 自定义响应头

* 以上这些信息在浏览器控制台 network 选项中查看到

** 在自定义请求头时 一般不可以传入汉字 ** 如果非要传入汉字 需要进行编码 然后后台进行对应解码操作

```javascript
xhr.setRequestHeader('fromWho','尝试传入汉字')
```

请求报文是由客户端设置 由服务器端获取的  响应报文是由服务端设置 由客户器端获取的

### 客户端把内容传递给服务器的方式

* 问号传参

使用请求报文 将内容写在请求头

使用请求报文 将内容写在请求主体

### 服务器把内容传递给客户端的方式

使用响应报文 将内容写在响应头

使用响应报文 将内容写在响应主体

【不会使用起始行进行内容传递】

## 名词解析

### TCP/IP 协议

简单的把一次通信的过程分为三个阶段：客户端发出，线路中传输，服务端响应。互联网中的设备要完成通信必须基于双方都能识别的规则，如通信的语音，格式，硬件和操作系统等等，这些规则的集合统称为TCP/IP 协议族。

### http 报文

用于HTTP协议交互的信息被称为HTTP报文


### 参考文章

1 [熟悉的陌生人-HTTP](http://www.jianshu.com/p/99dc1f8f62bf)

2 [HTTP协议详解](http://www.jianshu.com/p/7275aa3e4a13)
